### [3606. Coupon Code Validator](https://leetcode.com/problems/coupon-code-validator/)
```Typescript
function validateCoupons(
  code: string[],
  businessLine: string[],
  isActive: boolean[]
): string[] {
  const validBusinessLines = ["electronics", "grocery", "pharmacy", "restaurant"];
  function isValidCode(code: string): boolean {
    const regex = /^\w+$/;
    return regex.test(code);
  }

  function isValidCategory(category: string): boolean {
    return validBusinessLines.includes(category);
  }

  // Step 1: Filter valid coupons with their metadata
  const validCoupons = code
    .map((c, i) => ({
      code: c,
      category: businessLine[i],
      active: isActive[i],
      priority: validBusinessLines.indexOf(businessLine[i])
    }))
    .filter(
      (coupon) =>
        isValidCode(coupon.code) &&
        isValidCategory(coupon.category) &&
        coupon.active
    );

  // Step 2: Sort by category alphabetically, then by code alphabetically
  validCoupons.sort((a, b) => {
    if (a.priority !== b.priority) {
      return a.priority - b.priority;
    }
    return a.code < b.code ? -1: a.code > b.code ? 1 : 0;
  });

  // Step 3: Return only the sorted codes
  return validCoupons.map((coupon) => coupon.code);
}
```
```Python3
from typing import List

def validate_coupons(codes: List[str], business_lines: List[str], is_active: List[bool]) -> List[str]:
    valid_categories = ["electronics", "grocery", "pharmacy", "restaurant"]

    def is_valid_code(code: str) -> bool:
        return code.isalnum() or "_" in code

    def is_valid_category(category: str) -> bool:
        return category in valid_categories

    coupons = [
        {
            "code": code,
            "category": business_lines[i],
            "active": is_active[i],
            "priority": valid_categories.index(business_lines[i])
        }
        for i, code in enumerate(codes)
        if is_valid_code(code) and is_valid_category(business_lines[i]) and is_active[i]
    ]

    coupons.sort(key=lambda c: (c["priority"], c["code"]))
    return [c["code"] for c in coupons]
```
