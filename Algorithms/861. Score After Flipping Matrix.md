### [861. Score After Flipping Matrix](https://leetcode.com/problems/score-after-flipping-matrix/)
#### Brute Force
```Typescript
function matrixScore(grid: number[][]): number {

  function flip(list: number[]): number[] {
    return list.map(e => 1 - e);
  }

  // flip rows if necessary
  const rowFlipped = grid.map(row => row[0] === 0 ? flip(row) : row);

  // flip columns if necessary
  const rowCount = grid.length;
  const colCount = grid[0].length;
  for (let colId = 0; colId < colCount; colId++) {
    let sum = 0;
    for (let rowId = 0; rowId < rowCount; rowId++) {
      sum += rowFlipped[rowId][colId];
    }
    if (sum * 2 < rowCount) {
      for (let rowId = 0; rowId < rowCount; rowId++) {
        rowFlipped[rowId][colId] = 1 - rowFlipped[rowId][colId];
      }
    }
  }
  return rowFlipped.map(row => parseInt(row.join(''), 2)).reduce((a, b) => a + b, 0);
};
```
#### Clean Code
```Typescript
function matrixScore(grid: number[][]): number {
  const rows = grid.length;
  const cols = grid[0].length;

  // Ensure first column is all 1's by flipping rows if needed
  for (let r = 0; r < rows; r++) {
    if (grid[r] === 0) {
      grid[r] = grid[r].map(bit => 1 - bit);
    }
  }

  // For each column, maximize 1's by flipping if majority are 0's
  for (let c = 1; c < cols; c++) {
    let onesCount = grid.reduce((count, row) => count + row[c], 0);
    if (onesCount * 2 < rows) {
      for (let r = 0; r < rows; r++) {
        grid[r][c] = 1 - grid[r][c];
      }
    }
  }

  // Calculate score as sum of binary row values
  return grid
    .map(row => parseInt(row.join(''), 2))
    .reduce((sum, val) => sum + val, 0);
}
```
```Python3
def matrix_score(grid: list[list[int]]) -> int:
    rows, cols = len(grid), len(grid[0])

    # Ensure first column is all 1's
    for r in range(rows):
        if grid[r] == 0:
            grid[r] = [1 - bit for bit in grid[r]]

    # For each column, maximize 1's
    for c in range(1, cols):
        ones = sum(grid[r][c] for r in range(rows))
        if ones * 2 < rows:  # if majority are 0's
            for r in range(rows):
                grid[r][c] = 1 - grid[r][c]

    # Calculate total score
    return sum(int("".join(map(str, row)), 2) for row in grid)
```
